<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•¿è§†é¢‘ç†è§£èƒ½åŠ›åˆ†æå¯è§†åŒ–</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --color-text: #1a1a1a;
            --color-text-secondary: #555;
            --color-text-muted: #888;
            --color-bg: #ffffff;
            --color-bg-alt: #f8f9fa;
            --color-border: #e5e5e5;
            --color-accent: #2563eb;
            --color-accent-light: #dbeafe;

            /* èƒ½åŠ›é¢œè‰² */
            --color-visual: #4CAF50;
            --color-temporal: #2196F3;
            --color-reasoning: #F44336;
            --color-spatial: #FF9800;
            --color-audiovisual: #9C27B0;
            --color-highlight: #FFF9C4;

            --font-serif: 'Crimson Pro', 'Noto Sans SC', serif;
            --font-sans: 'Noto Sans SC', -apple-system, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            font-size: 16px;
            line-height: 1.6;
            color: var(--color-text);
            background: var(--color-bg);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border-bottom: 1px solid var(--color-border);
            padding: 3rem 2rem 2.5rem;
            text-align: center;
        }

        .header-tag {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-accent);
            background: var(--color-accent-light);
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
            margin-bottom: 1rem;
        }

        .header h1 {
            font-family: var(--font-serif);
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            font-size: 1rem;
            color: var(--color-text-secondary);
            font-weight: 400;
        }

        /* Main Content */
        .main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
        }

        /* Section */
        .section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-text);
        }

        .section-number {
            font-family: var(--font-serif);
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--color-accent);
            line-height: 1;
        }

        .section-title {
            font-family: var(--font-serif);
            font-size: 1.25rem;
            font-weight: 600;
        }

        .section-count {
            margin-left: auto;
            font-size: 0.875rem;
            color: var(--color-text-muted);
        }

        /* ========== èƒ½åŠ›åˆ†ç±»æ¦‚è§ˆè¡¨æ ¼ ========== */
        .ability-overview-table {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            background: var(--color-border);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            overflow: hidden;
        }

        .ability-column {
            background: var(--color-bg);
            display: flex;
            flex-direction: column;
        }

        .ability-header {
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid var(--color-border);
        }

        .ability-icon {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .ability-name-zh {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.125rem;
        }

        .ability-name-en {
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        .ability-skills {
            padding: 1rem;
            flex: 1;
            border-bottom: 1px solid var(--color-border);
        }

        .ability-skills ul {
            list-style: none;
            font-size: 0.85rem;
        }

        .ability-skills li {
            padding: 0.25rem 0;
            padding-left: 1rem;
            position: relative;
        }

        .ability-skills li::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .ability-examples {
            padding: 1rem;
            background: var(--color-bg-alt);
            font-size: 0.8rem;
            color: var(--color-text-secondary);
        }

        .ability-examples p {
            margin-bottom: 0.5rem;
        }

        .ability-examples p:last-child {
            margin-bottom: 0;
        }

        .ability-examples .icon {
            margin-right: 0.25rem;
        }

        /* èƒ½åŠ›é¢œè‰²æ ‡è®° */
        .ability-column[data-ability="visual_perception"] .ability-header {
            border-top: 3px solid var(--color-visual);
        }
        .ability-column[data-ability="visual_perception"] .ability-skills li::before {
            color: var(--color-visual);
        }

        .ability-column[data-ability="temporal_dynamics"] .ability-header {
            border-top: 3px solid var(--color-temporal);
        }
        .ability-column[data-ability="temporal_dynamics"] .ability-skills li::before {
            color: var(--color-temporal);
        }

        .ability-column[data-ability="high_level_reasoning"] .ability-header {
            border-top: 3px solid var(--color-reasoning);
        }
        .ability-column[data-ability="high_level_reasoning"] .ability-skills li::before {
            color: var(--color-reasoning);
        }

        .ability-column[data-ability="spatial_object_dynamics"] .ability-header {
            border-top: 3px solid var(--color-spatial);
        }
        .ability-column[data-ability="spatial_object_dynamics"] .ability-skills li::before {
            color: var(--color-spatial);
        }

        .ability-column[data-ability="audiovisual_joint"] .ability-header {
            border-top: 3px solid var(--color-audiovisual);
        }
        .ability-column[data-ability="audiovisual_joint"] .ability-skills li::before {
            color: var(--color-audiovisual);
        }

        /* ========== èƒ½åŠ›ç­›é€‰å™¨ ========== */
        .filter-section {
            background: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 2rem;
        }

        .filter-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .filter-title {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .filter-clear {
            font-size: 0.8rem;
            color: var(--color-accent);
            cursor: pointer;
            text-decoration: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .filter-clear:hover {
            background: var(--color-accent-light);
        }

        .filter-buttons {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: 2px solid var(--color-border);
            border-radius: 6px;
            background: var(--color-bg);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .filter-btn .checkbox {
            width: 16px;
            height: 16px;
            border: 2px solid currentColor;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .filter-btn .checkbox::after {
            content: "âœ“";
            font-size: 10px;
            opacity: 0;
            transform: scale(0);
            transition: all 0.2s;
        }

        .filter-btn.active .checkbox {
            background: currentColor;
        }

        .filter-btn.active .checkbox::after {
            opacity: 1;
            transform: scale(1);
            color: white;
        }

        .filter-btn[data-ability="visual_perception"] {
            color: var(--color-visual);
        }
        .filter-btn[data-ability="visual_perception"].active {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--color-visual);
        }

        .filter-btn[data-ability="temporal_dynamics"] {
            color: var(--color-temporal);
        }
        .filter-btn[data-ability="temporal_dynamics"].active {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--color-temporal);
        }

        .filter-btn[data-ability="high_level_reasoning"] {
            color: var(--color-reasoning);
        }
        .filter-btn[data-ability="high_level_reasoning"].active {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--color-reasoning);
        }

        .filter-btn[data-ability="spatial_object_dynamics"] {
            color: var(--color-spatial);
        }
        .filter-btn[data-ability="spatial_object_dynamics"].active {
            background: rgba(255, 152, 0, 0.1);
            border-color: var(--color-spatial);
        }

        .filter-btn[data-ability="audiovisual_joint"] {
            color: var(--color-audiovisual);
        }
        .filter-btn[data-ability="audiovisual_joint"].active {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--color-audiovisual);
        }

        .filter-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--color-border);
            font-size: 0.85rem;
            color: var(--color-text-secondary);
        }

        .filter-status-counts {
            display: flex;
            gap: 1.5rem;
        }

        .filter-status-counts span {
            font-weight: 500;
        }

        /* ========== è®ºæ–‡æ–¹æ³•å±•ç¤ºåŒº ========== */
        .paper-card {
            border: 1px solid var(--color-border);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: opacity 0.3s, transform 0.3s;
        }

        .paper-card.hidden {
            display: none;
        }

        .paper-header {
            background: var(--color-bg-alt);
            padding: 0.75rem 1.25rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .paper-icon {
            font-size: 1.1rem;
        }

        .paper-name {
            font-weight: 600;
            font-size: 1rem;
        }

        .paper-full-name {
            font-size: 0.85rem;
            color: var(--color-text-secondary);
            text-decoration: none;
            margin-left: 0.5rem;
            padding-left: 0.75rem;
            border-left: 1px solid var(--color-border);
            transition: color 0.2s;
        }

        .paper-full-name:hover {
            color: var(--color-accent);
            text-decoration: underline;
        }

        .paper-info-grid {
            display: grid;
            grid-template-columns: 180px 1fr 180px 120px 1fr 150px;
            border-bottom: 1px solid var(--color-border);
        }

        /* æ–¹æ³•å›¾ç¼©ç•¥å›¾ */
        .paper-thumbnail {
            max-height: 80px;
            max-width: 100%;
            width: auto;
            object-fit: contain;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .paper-thumbnail:hover {
            transform: scale(1.05);
        }

        .no-image {
            color: var(--color-text-muted);
            font-size: 0.8rem;
        }

        /* å›¾ç‰‡ Modal å¼¹çª— */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
        }

        .image-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
        }

        .image-modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
        }

        .image-modal-content img {
            max-width: 90vw;
            max-height: 90vh;
            object-fit: contain;
        }

        .image-modal-close {
            position: absolute;
            top: -40px;
            right: 0;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
            line-height: 1;
        }

        .image-modal-close:hover {
            color: #ccc;
        }

        .paper-info-cell {
            padding: 0.75rem 1rem;
            border-right: 1px solid var(--color-border);
            font-size: 0.85rem;
        }

        .paper-info-cell:last-child {
            border-right: none;
        }

        .paper-info-label {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .paper-info-value {
            color: var(--color-text);
            line-height: 1.4;
        }

        .paper-info-value ul {
            list-style: none;
            font-size: 0.8rem;
        }

        .paper-info-value li {
            padding-left: 0.75rem;
            position: relative;
        }

        .paper-info-value li::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--color-accent);
        }

        /* Tools & Memory åŒºåŸŸ */
        .tools-memory-section {
            padding: 1rem 1.25rem;
        }

        .tools-memory-header {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-text-muted);
            margin-bottom: 0.75rem;
        }

        .tools-memory-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        /* Tool å¡ç‰‡ */
        .tool-card {
            width: 280px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            background: var(--color-bg);
            font-size: 0.8rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .tool-card.highlighted {
            background: var(--color-highlight);
            border-color: #fde047;
            order: -1;
        }

        .tool-card-header {
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-weight: 600;
        }

        .tool-card.highlighted .tool-card-header {
            border-bottom-color: #fde047;
        }

        .tool-card-body {
            padding: 0.5rem 0.75rem;
        }

        .tool-card-row {
            display: flex;
            margin-bottom: 0.25rem;
            align-items: flex-start;
        }

        .tool-card-row:last-child {
            margin-bottom: 0;
        }

        .tool-card-label {
            color: var(--color-text-muted);
            width: 45px;
            flex-shrink: 0;
        }

        .tool-card-value {
            flex: 1;
            word-wrap: break-word;
            word-break: break-word;
        }

        .tool-card-abilities {
            padding: 0.375rem 0.75rem;
            border-top: 1px solid var(--color-border);
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
        }

        .tool-card.highlighted .tool-card-abilities {
            border-top-color: #fde047;
        }

        /* Memory å¡ç‰‡ */
        .memory-card {
            width: 280px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            background: var(--color-bg);
            font-size: 0.8rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .memory-card.highlighted {
            background: var(--color-highlight);
            border-color: #fde047;
            order: -1;
        }

        .memory-card-header {
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-weight: 600;
        }

        .memory-card.highlighted .memory-card-header {
            border-bottom-color: #fde047;
        }

        .memory-card-body {
            padding: 0.5rem 0.75rem;
        }

        .memory-card-row {
            display: flex;
            margin-bottom: 0.25rem;
            align-items: flex-start;
        }

        .memory-card-row:last-child {
            margin-bottom: 0;
        }

        .memory-card-label {
            color: var(--color-text-muted);
            width: 45px;
            flex-shrink: 0;
        }

        .memory-card-value {
            flex: 1;
            word-wrap: break-word;
            word-break: break-word;
        }

        .memory-card-abilities {
            padding: 0.375rem 0.75rem;
            border-top: 1px solid var(--color-border);
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
        }

        .memory-card.highlighted .memory-card-abilities {
            border-top-color: #fde047;
        }

        /* èƒ½åŠ›æ ‡ç­¾ */
        .ability-tag {
            display: inline-block;
            padding: 0.125rem 0.375rem;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .ability-tag:hover {
            transform: scale(1.05);
        }

        .ability-tag[data-ability="visual_perception"] {
            background: rgba(76, 175, 80, 0.15);
            color: var(--color-visual);
        }

        .ability-tag[data-ability="temporal_dynamics"] {
            background: rgba(33, 150, 243, 0.15);
            color: var(--color-temporal);
        }

        .ability-tag[data-ability="high_level_reasoning"] {
            background: rgba(244, 67, 54, 0.15);
            color: var(--color-reasoning);
        }

        .ability-tag[data-ability="spatial_object_dynamics"] {
            background: rgba(255, 152, 0, 0.15);
            color: var(--color-spatial);
        }

        .ability-tag[data-ability="audiovisual_joint"] {
            background: rgba(156, 39, 176, 0.15);
            color: var(--color-audiovisual);
        }

        /* ========== Case å±•ç¤ºåŒº ========== */
        .case-card {
            border: 1px solid var(--color-border);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: opacity 0.3s, transform 0.3s;
        }

        .case-card.hidden {
            display: none;
        }

        .case-header {
            background: var(--color-bg-alt);
            padding: 0.75rem 1.25rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .case-header-left {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .case-icon {
            font-size: 1.1rem;
        }

        .case-id {
            font-weight: 600;
            font-size: 1rem;
        }

        .case-header-right {
            display: flex;
            gap: 0.75rem;
        }

        .case-link {
            color: var(--color-accent);
            text-decoration: none;
            font-size: 1.1rem;
            transition: transform 0.2s;
        }

        .case-link:hover {
            transform: scale(1.1);
        }

        .case-body {
            padding: 1.25rem;
        }

        /* åŸºç¡€ä¿¡æ¯åŒº */
        .case-info-section {
            margin-bottom: 1.25rem;
        }

        .case-info-grid {
            display: grid;
            grid-template-columns: 180px 180px 1fr;
            gap: 1px;
            background: var(--color-border);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            overflow: hidden;
        }

        .case-info-cell {
            background: var(--color-bg);
            padding: 0.75rem 1rem;
        }

        .case-info-label {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .case-info-value {
            font-size: 0.85rem;
            color: var(--color-text);
        }

        /* åˆ†ç±»ä¿¡æ¯å­—æ®µæ ·å¼ */
        .case-info-field {
            display: flex;
            margin-bottom: 0.35rem;
        }

        .case-info-field:last-child {
            margin-bottom: 0;
        }

        .case-info-field-name {
            color: var(--color-text-muted);
            font-size: 0.8rem;
            min-width: 75px;
            flex-shrink: 0;
        }

        .case-info-field-value {
            color: var(--color-text);
            font-weight: 500;
        }

        .case-question-cell {
            grid-row: span 2;
        }

        .case-question {
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .case-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .case-option {
            font-size: 0.85rem;
            padding: 0.25rem 0.5rem;
            background: var(--color-bg-alt);
            border-radius: 4px;
        }

        .case-option.correct {
            background: rgba(76, 175, 80, 0.15);
            font-weight: 500;
        }

        .case-option.correct::after {
            content: " âœ“";
            color: var(--color-visual);
        }

        .case-abilities {
            display: flex;
            flex-wrap: wrap;
            gap: 0.375rem;
            margin-top: 0.5rem;
        }

        .case-abilities-label {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            margin-right: 0.25rem;
        }

        /* æ¨ç†å¯¹ç…§åŒº */
        .case-reasoning-section {
            margin-bottom: 1.25rem;
        }

        .reasoning-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .reasoning-column {
            border: 1px solid var(--color-border);
            border-radius: 6px;
            overflow: hidden;
        }

        .reasoning-header {
            background: var(--color-bg-alt);
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-text-secondary);
            border-bottom: 1px solid var(--color-border);
        }

        .reasoning-content {
            padding: 0.75rem;
            font-size: 0.85rem;
            line-height: 1.6;
            max-height: 150px;
            overflow-y: auto;
        }

        .reasoning-content.placeholder {
            color: var(--color-text-muted);
            font-style: italic;
        }

        /* å­—å¹•å’Œ Plan åŒºåŸŸ - ä¸¤æ å¸ƒå±€ */
        .case-subtitle-plan-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* å­—å¹•åŒº */
        .case-subtitle-section {
            border: 1px solid var(--color-border);
            border-radius: 6px;
            overflow: hidden;
        }

        .subtitle-header {
            background: var(--color-bg-alt);
            padding: 0.5rem 0.75rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: background 0.2s;
        }

        .subtitle-header:hover {
            background: #eef2ff;
        }

        .subtitle-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-text-secondary);
        }

        .subtitle-toggle {
            font-size: 0.75rem;
            color: var(--color-accent);
        }

        .subtitle-content {
            display: none;
            padding: 0.75rem;
            font-size: 0.8rem;
            line-height: 1.6;
            max-height: 200px;
            overflow-y: auto;
            color: var(--color-text-secondary);
            font-family: var(--font-mono);
            white-space: pre-wrap;
        }

        .subtitle-content.expanded {
            display: block;
        }

        .subtitle-preview {
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
            color: var(--color-text-muted);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            border-top: 1px solid var(--color-border);
        }

        .subtitle-preview.hidden {
            display: none;
        }

        /* Plan åŒºåŸŸæ ·å¼ */
        .case-plan-section {
            border: 1px solid var(--color-border);
            border-radius: 6px;
            overflow: hidden;
        }

        .plan-header {
            background: var(--color-bg-alt);
            padding: 0.5rem 0.75rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .plan-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-text-secondary);
        }

        .plan-content {
            padding: 0.75rem;
            font-size: 0.8rem;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }

        .plan-content.placeholder {
            color: var(--color-text-muted);
            font-style: italic;
        }

        .plan-task {
            font-weight: 600;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--color-border);
        }

        .plan-steps {
            list-style: none;
        }

        .plan-step {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: var(--color-bg-alt);
            border-radius: 4px;
            border-left: 3px solid var(--color-accent);
        }

        .plan-step-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .plan-step-number {
            background: var(--color-accent);
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .plan-step-desc {
            font-weight: 500;
            color: var(--color-text);
        }

        .plan-step-details {
            margin-left: 26px;
            font-size: 0.75rem;
            color: var(--color-text-secondary);
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 0.5rem;
        }

        .plan-step-tool {
            display: inline-block;
            background: rgba(37, 99, 235, 0.1);
            color: var(--color-accent);
            padding: 0.125rem 0.375rem;
            border-radius: 3px;
            font-family: var(--font-mono);
            font-size: 0.7rem;
        }

        .plan-step-purpose {
            flex: 1;
            min-width: 150px;
        }

        .plan-step-dep {
            color: var(--color-text-muted);
            font-size: 0.7rem;
            background: var(--color-bg);
            padding: 0.125rem 0.375rem;
            border-radius: 3px;
        }

        .plan-step-io {
            margin-left: 26px;
            margin-top: 0.375rem;
            padding: 0.375rem 0.5rem;
            background: var(--color-bg);
            border-radius: 4px;
            border: 1px dashed var(--color-border);
            font-size: 0.7rem;
        }

        .plan-io-row {
            display: flex;
            margin-bottom: 0.25rem;
        }

        .plan-io-row:last-child {
            margin-bottom: 0;
        }

        .plan-io-label {
            color: var(--color-text-muted);
            min-width: 36px;
            flex-shrink: 0;
            font-weight: 500;
        }

        .plan-io-value {
            color: var(--color-text-secondary);
            font-family: var(--font-mono);
            word-break: break-word;
        }

        .plan-tool-chain {
            margin-top: 0.75rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--color-border);
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        .plan-tool-chain-label {
            font-weight: 500;
            margin-right: 0.5rem;
        }

        /* ========== å“åº”å¼ ========== */
        @media (max-width: 1200px) {
            .paper-info-grid {
                grid-template-columns: 1fr 1fr;
            }

            .paper-info-cell:nth-child(5) {
                grid-column: span 1;
            }

            .paper-info-cell:nth-child(6) {
                grid-column: span 1;
            }
        }

        @media (max-width: 900px) {
            .ability-overview-table {
                grid-template-columns: repeat(3, 1fr);
            }

            .ability-column:nth-child(4),
            .ability-column:nth-child(5) {
                grid-column: auto;
            }

            .case-info-grid {
                grid-template-columns: 1fr;
            }

            .case-question-cell {
                grid-row: auto;
            }

            .reasoning-grid {
                grid-template-columns: 1fr;
            }

            .case-subtitle-plan-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 2rem 1rem;
            }

            .main {
                padding: 1.5rem 1rem;
            }

            .ability-overview-table {
                grid-template-columns: 1fr;
            }

            .filter-buttons {
                flex-direction: column;
            }

            .filter-btn {
                width: 100%;
                justify-content: flex-start;
            }

            .paper-info-grid {
                grid-template-columns: 1fr;
            }

            .tool-card,
            .memory-card {
                width: 100%;
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-bg-alt);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-text-muted);
        }

        /* Loading çŠ¶æ€ */
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--color-text-muted);
        }

        .loading::after {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-border);
            border-top-color: var(--color-accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-left: 0.5rem;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Side Navigation - Left Sidebar */
        .side-nav {
            position: fixed;
            top: 50%;
            left: 0;
            transform: translateY(-50%) translateX(calc(-100% + 20px));
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-border);
            border-left: none;
            border-radius: 0 0.5rem 0.5rem 0;
            z-index: 100;
            padding: 0.75rem 0;
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .side-nav:hover {
            transform: translateY(-50%) translateX(0);
        }

        /* è¾¹ç¼˜æç¤ºç®­å¤´ */
        .side-nav::after {
            content: "â€º";
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            color: var(--color-text-muted);
            opacity: 1;
            transition: opacity 0.3s;
        }

        .side-nav:hover::after {
            opacity: 0;
        }

        .side-nav-inner {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .side-nav-item {
            display: block;
            padding: 0.5rem 1rem;
            padding-right: 1.5rem;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--color-text-secondary);
            text-decoration: none;
            white-space: nowrap;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }

        .side-nav-item:hover,
        .side-nav-item.active {
            color: var(--color-accent);
            border-left-color: var(--color-accent);
            background: var(--color-accent-light);
            text-decoration: none;
        }

        @media (max-width: 1100px) {
            .side-nav {
                display: none;
            }
        }
    </style>
</head>

<body>
    <!-- Image Modal -->
    <div class="image-modal" id="imageModal">
        <div class="image-modal-overlay" onclick="closeImageModal()"></div>
        <div class="image-modal-content">
            <img id="modalImage" src="" alt="æ–¹æ³•å›¾">
            <button class="image-modal-close" onclick="closeImageModal()">Ã—</button>
        </div>
    </div>

    <!-- Side Navigation -->
    <nav class="side-nav" id="side-nav">
        <div class="side-nav-inner">
            <a href="#ability-overview" class="side-nav-item active" data-section="ability-overview">ã€‡ã€èƒ½åŠ›æ¦‚è§ˆ</a>
            <a href="#ability-filter" class="side-nav-item" data-section="ability-filter">ä¸€ã€ç­›é€‰</a>
            <a href="#papers-section" class="side-nav-item" data-section="papers-section">äºŒã€è®ºæ–‡</a>
            <a href="#cases-section" class="side-nav-item" data-section="cases-section">ä¸‰ã€Case</a>
        </div>
    </nav>
    <!-- Header -->
    <header class="header">
        <span class="header-tag">å¯è§†åŒ–åˆ†æ</span>
        <h1>é•¿è§†é¢‘ç†è§£èƒ½åŠ›åˆ†æ</h1>
        <p class="subtitle">Long Video Understanding - Ability Analysis & Visualization</p>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- ä¸€ã€èƒ½åŠ›åˆ†ç±»æ¦‚è§ˆ -->
        <section class="section" id="ability-overview">
            <div class="section-header">
                <span class="section-number">01</span>
                <h2 class="section-title">èƒ½åŠ›åˆ†ç±»æ¦‚è§ˆ</h2>
            </div>

            <div class="ability-overview-table">
                <!-- è§†è§‰æ„ŸçŸ¥ -->
                <div class="ability-column" data-ability="visual_perception">
                    <div class="ability-header">
                        <div class="ability-icon">ğŸŸ¢</div>
                        <div class="ability-name-zh">è§†è§‰æ„ŸçŸ¥</div>
                        <div class="ability-name-en">Visual Perception</div>
                    </div>
                    <div class="ability-skills">
                        <ul>
                            <li>ç‰©ä½“è¯†åˆ« (Object Recognition)</li>
                            <li>åŠ¨ä½œè¯†åˆ« (Action Recognition)</li>
                            <li>æ–‡å­—è¯†åˆ« (OCR)</li>
                            <li>å±æ€§è¯†åˆ« (Attribute Recognition)</li>
                            <li>é¢œè‰²è¯†åˆ« (Color Recognition)</li>
                            <li>æ–‡æœ¬è¯†åˆ« (Text Recognition)</li>
                        </ul>
                    </div>
                    <div class="ability-examples">
                        <p><span class="icon">ğŸ“</span>å›¾ä¸­æœ‰å“ªäº›ç‰©ä½“ï¼Ÿ</p>
                        <p><span class="icon">ğŸ“</span>æœ‰å¤šå°‘ä¸ªçº¢è‰²çš„æ–¹å—ï¼Ÿ</p>
                    </div>
                </div>

                <!-- æ—¶é—´åŠ¨æ€ç†è§£ -->
                <div class="ability-column" data-ability="temporal_dynamics">
                    <div class="ability-header">
                        <div class="ability-icon">ğŸ”µ</div>
                        <div class="ability-name-zh">æ—¶é—´åŠ¨æ€ç†è§£</div>
                        <div class="ability-name-en">Temporal Dynamics</div>
                    </div>
                    <div class="ability-skills">
                        <ul>
                            <li>æ—¶é—´å®šä½ (Temporal Grounding)</li>
                            <li>æ—¶é—´æ’åº (Temporal Ordering)</li>
                            <li>åŠ¨ä½œè®¡æ•° (Action Counting)</li>
                            <li>äº‹ä»¶è®¡æ•° (Event Counting)</li>
                        </ul>
                    </div>
                    <div class="ability-examples">
                        <p><span class="icon">ğŸ“</span>è¯¥åŠ¨ä½œå‘ç”Ÿåœ¨è§†é¢‘çš„å“ªä¸€æ®µï¼Ÿ</p>
                        <p><span class="icon">ğŸ“</span>å“ªä¸ªäº‹ä»¶å…ˆå‘ç”Ÿï¼Ÿ</p>
                    </div>
                </div>

                <!-- é«˜å±‚æ¨ç† -->
                <div class="ability-column" data-ability="high_level_reasoning">
                    <div class="ability-header">
                        <div class="ability-icon">ğŸ”´</div>
                        <div class="ability-name-zh">é«˜å±‚æ¨ç†</div>
                        <div class="ability-name-en">High-Level Reasoning</div>
                    </div>
                    <div class="ability-skills">
                        <ul>
                            <li>ç®—æœ¯æ¨ç† (Arithmetic Reasoning)</li>
                            <li>è®¡æ•° (Counting)</li>
                            <li>æ•°å­¦æ¨ç† (Mathematical Reasoning)</li>
                            <li>äº‹ä»¶è®¡æ•° (Event Counting)</li>
                            <li>åŠ¨ä½œè®¡æ•° (Action Counting)</li>
                            <li>é¡ºåºç†è§£ (Sequential Understanding)</li>
                        </ul>
                    </div>
                    <div class="ability-examples">
                        <p><span class="icon">ğŸ“</span>å¦‚æœæ¯ç»„æœ‰3ä¸ªç‰©ä½“ï¼Œå…±5ç»„...</p>
                        <p><span class="icon">ğŸ“</span>å“ªä¸€ç±»æ•°é‡æ›´å¤šï¼Ÿ</p>
                    </div>
                </div>

                <!-- ç©ºé—´ä¸ç‰©ä½“åŠ¨æ€ -->
                <div class="ability-column" data-ability="spatial_object_dynamics">
                    <div class="ability-header">
                        <div class="ability-icon">ğŸŸ </div>
                        <div class="ability-name-zh">ç©ºé—´ä¸ç‰©ä½“åŠ¨æ€</div>
                        <div class="ability-name-en">Spatial & Object Dynamics</div>
                    </div>
                    <div class="ability-skills">
                        <ul>
                            <li>ç©ºé—´å®šä½ (Spatial Localization)</li>
                            <li>ç©ºé—´å…³ç³»è¯†åˆ« (Spatial Relation Recognition)</li>
                            <li>ç‰©ä½“è®¡æ•° (Object Counting)</li>
                            <li>ç©ºé—´å…³ç³»æ„ŸçŸ¥ (Spatial Relation Perception)</li>
                            <li>ç©ºé—´æ¨ç† (Spatial Reasoning)</li>
                            <li>ç‰©ä½“è·Ÿè¸ª (Object Tracking)</li>
                        </ul>
                    </div>
                    <div class="ability-examples">
                        <p><span class="icon">ğŸ“</span>ç‰©ä½“Aä½äºç‰©ä½“Bçš„å“ªä¸ªæ–¹å‘ï¼Ÿ</p>
                        <p><span class="icon">ğŸ“</span>å“ªä¸ªç‰©ä½“æœ€é è¿‘ä¸­å¿ƒï¼Ÿ</p>
                    </div>
                </div>

                <!-- è§†å¬è”åˆç†è§£ -->
                <div class="ability-column" data-ability="audiovisual_joint">
                    <div class="ability-header">
                        <div class="ability-icon">ğŸŸ£</div>
                        <div class="ability-name-zh">è§†å¬è”åˆç†è§£</div>
                        <div class="ability-name-en">Audio-Visual Understanding</div>
                    </div>
                    <div class="ability-skills">
                        <ul>
                            <li>è¯­éŸ³è¯†åˆ« (Speech Recognition)</li>
                            <li>è§†å¬å¯¹é½ (Audio-Visual Alignment)</li>
                            <li>éŸ³é¢‘äº‹ä»¶æ£€æµ‹ (Audio Event Detection)</li>
                            <li>è§†å¬å…³è” (Audio-Visual Association)</li>
                        </ul>
                    </div>
                    <div class="ability-examples">
                        <p><span class="icon">ğŸ“</span>è¿™æ®µè¯­éŸ³å¯¹åº”ç”»é¢ä¸­çš„è°ï¼Ÿ</p>
                        <p><span class="icon">ğŸ“</span>å£°éŸ³æ˜¯å¦ä¸ç”»é¢åŒæ­¥ï¼Ÿ</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- äºŒã€èƒ½åŠ›ç­›é€‰å™¨ -->
        <section class="filter-section" id="ability-filter">
            <div class="filter-header">
                <span class="filter-title">èƒ½åŠ›ç­›é€‰ (å¤šé€‰ï¼ŒAND é€»è¾‘)</span>
                <a href="#" class="filter-clear" onclick="clearFilters(); return false;">æ¸…é™¤å…¨éƒ¨</a>
            </div>
            <div class="filter-buttons">
                <button class="filter-btn" data-ability="visual_perception" onclick="toggleFilter(this)">
                    <span class="checkbox"></span>
                    <span>è§†è§‰æ„ŸçŸ¥</span>
                </button>
                <button class="filter-btn" data-ability="temporal_dynamics" onclick="toggleFilter(this)">
                    <span class="checkbox"></span>
                    <span>æ—¶é—´åŠ¨æ€ç†è§£</span>
                </button>
                <button class="filter-btn" data-ability="high_level_reasoning" onclick="toggleFilter(this)">
                    <span class="checkbox"></span>
                    <span>é«˜å±‚æ¨ç†</span>
                </button>
                <button class="filter-btn" data-ability="spatial_object_dynamics" onclick="toggleFilter(this)">
                    <span class="checkbox"></span>
                    <span>ç©ºé—´ä¸ç‰©ä½“åŠ¨æ€</span>
                </button>
                <button class="filter-btn" data-ability="audiovisual_joint" onclick="toggleFilter(this)">
                    <span class="checkbox"></span>
                    <span>è§†å¬è”åˆç†è§£</span>
                </button>
            </div>
            <div class="filter-status">
                <span class="filter-current">å½“å‰ç­›é€‰: <span id="filter-current-text">æ—  (æ˜¾ç¤ºå…¨éƒ¨)</span></span>
                <div class="filter-status-counts">
                    <span>åŒ¹é…è®ºæ–‡: <span id="paper-count">0</span></span>
                    <span>åŒ¹é…Case: <span id="case-count">0</span></span>
                </div>
            </div>
        </section>

        <!-- ä¸‰ã€è®ºæ–‡æ–¹æ³•å±•ç¤ºåŒº -->
        <section class="section" id="papers-section">
            <div class="section-header">
                <span class="section-number">02</span>
                <h2 class="section-title">è®ºæ–‡æ–¹æ³•å±•ç¤º</h2>
                <span class="section-count" id="papers-total-count"></span>
            </div>
            <div id="papers-container">
                <div class="loading">åŠ è½½æ•°æ®ä¸­</div>
            </div>
        </section>

        <!-- å››ã€Case å±•ç¤ºåŒº -->
        <section class="section" id="cases-section">
            <div class="section-header">
                <span class="section-number">03</span>
                <h2 class="section-title">Case å±•ç¤º</h2>
                <span class="section-count" id="cases-total-count"></span>
            </div>
            <div id="cases-container">
                <div class="loading">åŠ è½½æ•°æ®ä¸­</div>
            </div>
        </section>
    </main>

    <script>
        // å…¨å±€æ•°æ®
        let data = null;
        let planData = null;  // plan æ•°æ®
        let selectedAbilities = new Set();

        // èƒ½åŠ›åç§°æ˜ å°„ - å®Œæ•´åç§°
        const abilityNames = {
            'visual_perception': 'è§†è§‰æ„ŸçŸ¥',
            'temporal_dynamics': 'æ—¶é—´åŠ¨æ€ç†è§£',
            'high_level_reasoning': 'é«˜å±‚æ¨ç†',
            'spatial_object_dynamics': 'ç©ºé—´ä¸ç‰©ä½“åŠ¨æ€',
            'audiovisual_joint': 'è§†å¬è”åˆç†è§£'
        };

        const abilityFullNames = {
            'visual_perception': 'è§†è§‰æ„ŸçŸ¥',
            'temporal_dynamics': 'æ—¶é—´åŠ¨æ€ç†è§£',
            'high_level_reasoning': 'é«˜å±‚æ¨ç†',
            'spatial_object_dynamics': 'ç©ºé—´ä¸ç‰©ä½“åŠ¨æ€',
            'audiovisual_joint': 'è§†å¬è”åˆç†è§£'
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // å¹¶è¡ŒåŠ è½½ä¸»æ•°æ®å’Œ plan æ•°æ®
                const [dataResponse, planResponse] = await Promise.all([
                    fetch('data/data.json'),
                    fetch('data/understanding_plan_results.json').catch(() => null)
                ]);

                data = await dataResponse.json();

                // plan æ•°æ®å¯èƒ½ä¸å­˜åœ¨ï¼Œå¤„ç†ä¸º Map ä¾¿äºæŸ¥æ‰¾
                if (planResponse && planResponse.ok) {
                    const planJson = await planResponse.json();
                    planData = new Map();
                    (planJson.results || []).forEach(item => {
                        if (item.id && item.plan_summary) {
                            planData.set(item.id, item.plan_summary);
                        }
                    });
                }

                renderPapers();
                renderCases();
                updateCounts();
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                document.getElementById('papers-container').innerHTML = '<p style="color: red;">åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
                document.getElementById('cases-container').innerHTML = '<p style="color: red;">åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
            }
        });

        // æ¸²æŸ“è®ºæ–‡å¡ç‰‡
        function renderPapers() {
            const container = document.getElementById('papers-container');
            container.innerHTML = '';

            data.papers.forEach(paper => {
                const card = createPaperCard(paper);
                container.appendChild(card);
            });

            document.getElementById('papers-total-count').textContent = `å…± ${data.papers.length} ç¯‡è®ºæ–‡`;
        }

        // åˆ›å»ºè®ºæ–‡å¡ç‰‡
        function createPaperCard(paper) {
            const card = document.createElement('div');
            card.className = 'paper-card';
            card.dataset.paperId = paper.id;

            // æ”¶é›†æ‰€æœ‰èƒ½åŠ›
            const allAbilities = new Set();
            paper.tools?.forEach(tool => {
                tool.abilities?.forEach(a => allAbilities.add(a));
            });
            paper.memory?.abilities?.forEach(a => allAbilities.add(a));
            card.dataset.abilities = JSON.stringify([...allAbilities]);

            card.innerHTML = `
                <div class="paper-header">
                    <span class="paper-icon">ğŸ“„</span>
                    <span class="paper-name">${paper.name}</span>
                    ${paper.fullName ? `<a href="${paper.paperUrl || '#'}" target="_blank" class="paper-full-name" title="æŸ¥çœ‹è®ºæ–‡">${paper.fullName}</a>` : ''}
                </div>
                <div class="paper-info-grid">
                    <div class="paper-info-cell">
                        <div class="paper-info-label">é—®é¢˜</div>
                        <div class="paper-info-value">${paper.problem || '-'}</div>
                    </div>
                    <div class="paper-info-cell">
                        <div class="paper-info-label">ä¸»è¦æ–¹æ³•</div>
                        <div class="paper-info-value">
                            <ul>
                                ${(paper.methods || []).map(m => `<li>${m}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="paper-info-cell">
                        <div class="paper-info-label">åŸºåº§æ¨¡å‹</div>
                        <div class="paper-info-value">${paper.baseModel || '-'}</div>
                    </div>
                    <div class="paper-info-cell">
                        <div class="paper-info-label">è®­ç»ƒæ–¹å¼</div>
                        <div class="paper-info-value">${paper.trainingMethod || '-'}</div>
                    </div>
                    <div class="paper-info-cell">
                        <div class="paper-info-label">å…³é”®å‘ç° / æœªè§£å†³é—®é¢˜</div>
                        <div class="paper-info-value">
                            ${paper.keyFindings ? `<strong>å‘ç°:</strong> ${paper.keyFindings}<br>` : ''}
                            ${paper.unsolvedProblems ? `<strong>æœªè§£å†³:</strong> ${paper.unsolvedProblems}` : ''}
                        </div>
                    </div>
                    <div class="paper-info-cell">
                        <div class="paper-info-label">æ–¹æ³•å›¾</div>
                        <div class="paper-info-value">
                            ${paper.overviewImage
                                ? `<img class="paper-thumbnail" src="images/overview/${paper.overviewImage.split('/').pop()}" alt="${paper.name} æ–¹æ³•å›¾" onclick="openImageModal(this.src)">`
                                : '<span class="no-image">æš‚æ— å›¾ç‰‡</span>'}
                        </div>
                    </div>
                </div>
                <div class="tools-memory-section">
                    <div class="tools-memory-header">Tools & Memory</div>
                    <div class="tools-memory-grid" data-paper-id="${paper.id}">
                        ${renderToolCards(paper.tools || [])}
                        ${paper.memory ? renderMemoryCard(paper.memory) : ''}
                    </div>
                </div>
            `;

            return card;
        }

        // æ¸²æŸ“ Tool å¡ç‰‡
        function renderToolCards(tools) {
            return tools.map(tool => `
                <div class="tool-card" data-abilities='${JSON.stringify(tool.abilities || [])}'>
                    <div class="tool-card-header">
                        <span>ğŸ”§</span>
                        <span>${tool.name}</span>
                    </div>
                    <div class="tool-card-body">
                        <div class="tool-card-row">
                            <span class="tool-card-label">å®ç°:</span>
                            <span class="tool-card-value">${tool.implementation || '-'}</span>
                        </div>
                        <div class="tool-card-row">
                            <span class="tool-card-label">è¾“å…¥:</span>
                            <span class="tool-card-value">${tool.input || '-'}</span>
                        </div>
                        <div class="tool-card-row">
                            <span class="tool-card-label">è¾“å‡º:</span>
                            <span class="tool-card-value">${tool.output || '-'}</span>
                        </div>
                        <div class="tool-card-row">
                            <span class="tool-card-label">ç”¨é€”:</span>
                            <span class="tool-card-value">${tool.purpose || '-'}</span>
                        </div>
                    </div>
                    <div class="tool-card-abilities">
                        ${(tool.abilities || []).map(a => `<span class="ability-tag" data-ability="${a}" onclick="filterByAbility('${a}')">${abilityNames[a] || a}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // æ¸²æŸ“ Memory å¡ç‰‡
        function renderMemoryCard(memory) {
            return `
                <div class="memory-card" data-abilities='${JSON.stringify(memory.abilities || [])}'>
                    <div class="memory-card-header">
                        <span>ğŸ“¦</span>
                        <span>Memory</span>
                    </div>
                    <div class="memory-card-body">
                        <div class="memory-card-row">
                            <span class="memory-card-label">å¤„ç†:</span>
                            <span class="memory-card-value">${memory.contextHandling || '-'}</span>
                        </div>
                        <div class="memory-card-row">
                            <span class="memory-card-label">æœºåˆ¶:</span>
                            <span class="memory-card-value">${memory.mechanism || '-'}</span>
                        </div>
                        <div class="memory-card-row">
                            <span class="memory-card-label">è®¾è®¡:</span>
                            <span class="memory-card-value">${memory.keyDesign || '-'}</span>
                        </div>
                    </div>
                    <div class="memory-card-abilities">
                        ${(memory.abilities || []).map(a => `<span class="ability-tag" data-ability="${a}" onclick="filterByAbility('${a}')">${abilityNames[a] || a}</span>`).join('')}
                    </div>
                </div>
            `;
        }

        // æ¸²æŸ“ Case å¡ç‰‡
        function renderCases() {
            const container = document.getElementById('cases-container');
            container.innerHTML = '';

            data.cases.forEach(caseItem => {
                const card = createCaseCard(caseItem);
                container.appendChild(card);
            });

            document.getElementById('cases-total-count').textContent = `å…± ${data.cases.length} ä¸ª Case`;
        }

        // åˆ›å»º Case å¡ç‰‡
        function createCaseCard(caseItem) {
            const card = document.createElement('div');
            card.className = 'case-card';
            card.dataset.caseId = caseItem.id;
            card.dataset.abilities = JSON.stringify(caseItem.abilities || []);

            const options = caseItem.options || [];
            const answer = caseItem.answer || '';

            // è·å– plan æ•°æ®
            const planSummary = planData ? planData.get(caseItem.id) : null;

            card.innerHTML = `
                <div class="case-header">
                    <div class="case-header-left">
                        <span class="case-icon">ğŸ¬</span>
                        <span class="case-id">${caseItem.id}</span>
                    </div>
                    <div class="case-header-right">
                        ${caseItem.youtubeLink ? `<a href="${caseItem.youtubeLink}" target="_blank" class="case-link" title="è§‚çœ‹è§†é¢‘">â–¶ï¸</a>` : ''}
                    </div>
                </div>
                <div class="case-body">
                    <div class="case-info-section">
                        <div class="case-info-grid">
                            <div class="case-info-cell">
                                <div class="case-info-label">åˆ†ç±»ä¿¡æ¯</div>
                                <div class="case-info-value">
                                    <div class="case-info-field">
                                        <span class="case-info-field-name">Benchmark:</span>
                                        <span class="case-info-field-value">${caseItem.benchmark || '-'}</span>
                                    </div>
                                    <div class="case-info-field">
                                        <span class="case-info-field-name">Domain:</span>
                                        <span class="case-info-field-value">${caseItem.domain || '-'}</span>
                                    </div>
                                    <div class="case-info-field">
                                        <span class="case-info-field-name">SubCategory:</span>
                                        <span class="case-info-field-value">${caseItem.subCategory || '-'}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="case-info-cell">
                                <div class="case-info-label">ä»»åŠ¡ç±»å‹</div>
                                <div class="case-info-value">
                                    <div style="font-weight: 600; margin-bottom: 0.25rem;">${caseItem.taskType || '-'}</div>
                                    <div style="font-size: 0.8rem; color: var(--color-text-muted);">${caseItem.taskTypeDesc || ''}</div>
                                </div>
                            </div>
                            <div class="case-info-cell case-question-cell">
                                <div class="case-info-label">é—®é¢˜ä¸ç­”æ¡ˆ</div>
                                <div class="case-info-value">
                                    <div class="case-question">Q: ${caseItem.question || '-'}</div>
                                    <div class="case-options">
                                        ${options.map(opt => {
                                            const optLetter = opt.charAt(0);
                                            const isCorrect = optLetter === answer;
                                            return `<div class="case-option${isCorrect ? ' correct' : ''}">${opt}</div>`;
                                        }).join('')}
                                    </div>
                                    <div class="case-abilities">
                                        <span class="case-abilities-label">æ‰€éœ€èƒ½åŠ›:</span>
                                        ${(caseItem.abilities || []).map(a => `<span class="ability-tag" data-ability="${a}" onclick="filterByAbility('${a}')">${abilityFullNames[a] || a}</span>`).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="case-reasoning-section">
                        <div class="reasoning-grid">
                            <div class="reasoning-column">
                                <div class="reasoning-header">äººç±»æ¨ç†è·¯å¾„</div>
                                <div class="reasoning-content">${caseItem.humanReasoningSteps || '-'}</div>
                            </div>
                            <div class="reasoning-column">
                                <div class="reasoning-header">UniVA Plan Agent è¾“å‡ºæ€»ç»“ï¼ˆä»…è¾“å…¥ Questionï¼‰</div>
                                <div class="reasoning-content${planSummary ? '' : ' placeholder'}">${planSummary ? renderPlanSummary(planSummary) : 'æš‚æ— æ•°æ®...'}</div>
                            </div>
                        </div>
                    </div>

                    <div class="case-subtitle-plan-section">
                        ${caseItem.subtitle ? `
                        <div class="case-subtitle-section">
                            <div class="subtitle-header" onclick="toggleSubtitle(this)">
                                <span class="subtitle-title">å­—å¹•å†…å®¹</span>
                                <span class="subtitle-toggle">å±•å¼€ â–¼</span>
                            </div>
                            <div class="subtitle-preview">${(caseItem.subtitle || '').substring(0, 100)}...</div>
                            <div class="subtitle-content">${caseItem.subtitle || ''}</div>
                        </div>
                        ` : '<div></div>'}
                        <div class="case-plan-section">
                            <div class="plan-header">
                                <span class="plan-title">Plan è¯¦æƒ… (JSON)</span>
                            </div>
                            <div class="plan-content${planSummary ? '' : ' placeholder'}">
                                ${planSummary ? renderPlanDetails(planSummary) : 'æš‚æ— æ•°æ®...'}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            return card;
        }

        // æ¸²æŸ“ Plan æ‘˜è¦ï¼ˆç”¨äºæ¨ç†å¯¹ç…§åŒºï¼‰
        function renderPlanSummary(plan) {
            if (!plan) return '';

            let html = '';
            if (plan.ä»»åŠ¡) {
                html += `<div class="plan-task">ğŸ“‹ ${plan.ä»»åŠ¡}</div>`;
            }
            if (plan.å·¥å…·é“¾) {
                html += `<div class="plan-tool-chain"><span class="plan-tool-chain-label">å·¥å…·é“¾:</span>${plan.å·¥å…·é“¾}</div>`;
            }
            return html || '-';
        }

        // æ¸²æŸ“ Plan è¯¦æƒ…ï¼ˆç”¨äºä¸‹æ–¹ JSON åŒºåŸŸï¼‰
        function renderPlanDetails(plan) {
            if (!plan) return '';

            let html = '';

            if (plan.ä»»åŠ¡) {
                html += `<div class="plan-task">ğŸ“‹ ä»»åŠ¡: ${plan.ä»»åŠ¡}</div>`;
            }

            if (plan.æ‰§è¡Œæ­¥éª¤ && plan.æ‰§è¡Œæ­¥éª¤.length > 0) {
                html += '<ul class="plan-steps">';
                plan.æ‰§è¡Œæ­¥éª¤.forEach(step => {
                    html += `
                        <li class="plan-step">
                            <div class="plan-step-header">
                                <span class="plan-step-number">${step.æ­¥éª¤}</span>
                                <span class="plan-step-desc">${step.æè¿°}</span>
                            </div>
                            <div class="plan-step-details">
                                <span class="plan-step-tool">${step.å·¥å…·}</span>
                                ${step.ç›®çš„ ? `<span class="plan-step-purpose">${step.ç›®çš„}</span>` : ''}
                                ${step.ä¾èµ– ? `<span class="plan-step-dep">ä¾èµ–: ${step.ä¾èµ–.join(', ')}</span>` : ''}
                            </div>
                            ${(step.è¾“å…¥ || step.è¾“å‡º) ? `
                            <div class="plan-step-io">
                                ${step.è¾“å…¥ ? `<div class="plan-io-row"><span class="plan-io-label">è¾“å…¥:</span><span class="plan-io-value">${step.è¾“å…¥}</span></div>` : ''}
                                ${step.è¾“å‡º ? `<div class="plan-io-row"><span class="plan-io-label">è¾“å‡º:</span><span class="plan-io-value">${step.è¾“å‡º}</span></div>` : ''}
                            </div>
                            ` : ''}
                        </li>
                    `;
                });
                html += '</ul>';
            }

            if (plan.å·¥å…·é“¾) {
                html += `<div class="plan-tool-chain"><span class="plan-tool-chain-label">ğŸ”— å·¥å…·é“¾:</span>${plan.å·¥å…·é“¾}</div>`;
            }

            return html || '-';
        }

        // åˆ‡æ¢å­—å¹•å±•å¼€/æ”¶èµ·
        function toggleSubtitle(header) {
            const section = header.parentElement;
            const content = section.querySelector('.subtitle-content');
            const preview = section.querySelector('.subtitle-preview');
            const toggle = header.querySelector('.subtitle-toggle');

            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                preview.classList.remove('hidden');
                toggle.textContent = 'å±•å¼€ â–¼';
            } else {
                content.classList.add('expanded');
                preview.classList.add('hidden');
                toggle.textContent = 'æ”¶èµ· â–²';
            }
        }

        // åˆ‡æ¢ç­›é€‰å™¨
        function toggleFilter(btn) {
            const ability = btn.dataset.ability;

            if (selectedAbilities.has(ability)) {
                selectedAbilities.delete(ability);
                btn.classList.remove('active');
            } else {
                selectedAbilities.add(ability);
                btn.classList.add('active');
            }

            applyFilters();
        }

        // é€šè¿‡èƒ½åŠ›æ ‡ç­¾ç­›é€‰
        function filterByAbility(ability) {
            // æ¸…é™¤æ‰€æœ‰ç­›é€‰
            selectedAbilities.clear();
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // æ·»åŠ é€‰ä¸­çš„èƒ½åŠ›
            selectedAbilities.add(ability);
            const targetBtn = document.querySelector(`.filter-btn[data-ability="${ability}"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }

            applyFilters();

            // æ»šåŠ¨åˆ°ç­›é€‰å™¨
            document.getElementById('ability-filter').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // æ¸…é™¤æ‰€æœ‰ç­›é€‰
        function clearFilters() {
            selectedAbilities.clear();
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            applyFilters();
        }

        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            // æ›´æ–°ç­›é€‰çŠ¶æ€æ–‡æœ¬
            const currentText = document.getElementById('filter-current-text');
            if (selectedAbilities.size === 0) {
                currentText.textContent = 'æ—  (æ˜¾ç¤ºå…¨éƒ¨)';
            } else {
                const names = [...selectedAbilities].map(a => abilityFullNames[a] || a);
                currentText.textContent = names.join(' + ');
            }

            // ç­›é€‰è®ºæ–‡
            filterPapers();

            // ç­›é€‰ Cases
            filterCases();

            // æ›´æ–°è®¡æ•°
            updateCounts();
        }

        // ç­›é€‰è®ºæ–‡
        function filterPapers() {
            const papers = document.querySelectorAll('.paper-card');

            papers.forEach(paper => {
                if (selectedAbilities.size === 0) {
                    paper.classList.remove('hidden');
                    // ç§»é™¤æ‰€æœ‰é«˜äº®
                    paper.querySelectorAll('.tool-card, .memory-card').forEach(card => {
                        card.classList.remove('highlighted');
                    });
                    return;
                }

                // æ£€æŸ¥è®ºæ–‡æ˜¯å¦æœ‰åŒ¹é…çš„å·¥å…·/Memory
                let hasMatch = false;
                const toolsGrid = paper.querySelector('.tools-memory-grid');
                const cards = toolsGrid.querySelectorAll('.tool-card, .memory-card');

                cards.forEach(card => {
                    const cardAbilities = JSON.parse(card.dataset.abilities || '[]');
                    const matches = [...selectedAbilities].every(a => cardAbilities.includes(a));

                    if (matches && cardAbilities.length > 0) {
                        card.classList.add('highlighted');
                        hasMatch = true;
                    } else {
                        card.classList.remove('highlighted');
                    }
                });

                if (hasMatch) {
                    paper.classList.remove('hidden');
                } else {
                    paper.classList.add('hidden');
                }
            });
        }

        // ç­›é€‰ Cases
        function filterCases() {
            const cases = document.querySelectorAll('.case-card');

            cases.forEach(caseCard => {
                if (selectedAbilities.size === 0) {
                    caseCard.classList.remove('hidden');
                    return;
                }

                const caseAbilities = JSON.parse(caseCard.dataset.abilities || '[]');
                const matches = [...selectedAbilities].every(a => caseAbilities.includes(a));

                if (matches) {
                    caseCard.classList.remove('hidden');
                } else {
                    caseCard.classList.add('hidden');
                }
            });
        }

        // æ›´æ–°è®¡æ•°
        function updateCounts() {
            const visiblePapers = document.querySelectorAll('.paper-card:not(.hidden)').length;
            const visibleCases = document.querySelectorAll('.case-card:not(.hidden)').length;

            document.getElementById('paper-count').textContent = visiblePapers;
            document.getElementById('case-count').textContent = visibleCases;
        }

        // Side Navigation - Scroll Spy
        function setupSideNav() {
            const sections = ['ability-overview', 'ability-filter', 'papers-section', 'cases-section'];
            const navItems = document.querySelectorAll('.side-nav-item');

            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -60% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionId = entry.target.id;
                        navItems.forEach(item => {
                            item.classList.remove('active');
                            if (item.dataset.section === sectionId) {
                                item.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);

            sections.forEach(id => {
                const section = document.getElementById(id);
                if (section) {
                    observer.observe(section);
                }
            });

            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = item.dataset.section;
                    const target = document.getElementById(targetId);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
        }

        // Initialize side nav
        setupSideNav();

        // å›¾ç‰‡ Modal åŠŸèƒ½
        function openImageModal(src) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            modalImage.src = src;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // ESC é”®å…³é—­ Modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });
    </script>
</body>

</html>
